<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>StableSwap: stablecoin exchange</title>
    <link rel="stylesheet" href="tvision.css" />
    <script src="/apexcharts.js"></script>
    <script src="/jquery.min.js"></script>
    <script src="/abis.js"></script>
    <script src="/common.js"></script>
    <script src="/swap.js"></script>
  </head>
  <body>
    <div class="top-menu-bar">
      <a href="/">Buy and sell</a>
      <a href="/deposit.html">Deposit</a>
      <a href="/withdraw.html">Withdraw</a>
    </div>
    <div id="screen">
        <div class="blue window">
            <h1>StableSwap: stablecoin exchange</h1>
        </div>

        <div class="window white">
            <div style="display: table; margin: auto">
                <fieldset style="float: left">
                    <legend>From:</legend>
                    <ul>
                        <li>
                            <input type="text" id="from_currency" name="from_currency" value="0.0" onclick="this.select();">
                        </li>
                        <li>
                            <input type="radio" id="from_cur_0" name="from_cur" value="0">
                            <label for="from_cur_0">DAI</label>
                        </li>
                        <li>
                            <input type="radio" id="from_cur_1" name="from_cur" value="1">
                            <label for="from_cur_1">USDC</label>
                        </li>
                        <li>
                            <input type="radio" id="from_cur_2" name="from_cur" value="2">
                            <label for="from_cur_2">USDT</label>
                        </li>
                    </ul>
                </fieldset>
                <fieldset style="float: left">
                    <legend>To:</legend>
                    <ul>
                        <li>
                            <input type="text" id="to_currency" name="to_currency" value="0.0" onclick="this.select();">
                        </li>
                        <li>
                            <input type="radio" id="to_cur_0" name="to_cur" value="0">
                            <label for="to_cur_0">DAI</label>
                        </li>
                        <li>
                            <input type="radio" id="to_cur_1" name="to_cur" value="1">
                            <label for="to_cur_1">USDC</label>
                        </li>
                        <li>
                            <input type="radio" id="to_cur_2" name="to_cur" value="2">
                            <label for="to_cur_2">USDT</label>
                        </li>
                    </ul>
                </fieldset>
                <p style="text-align: center; padding-top: 7.5em">
                    <button>Sell</button>
                </p>
            </div>
            <fieldset>
                <legend>DAI/USDC price</legend>
                <p id="chart" style="background-color: white; border: 1px solid gray"></p>
    <script>
    var options = {
      chart: {
        height: 350,
        type: 'candlestick',
      },
      series: [{
        data: []
      }],
      xaxis: {
        type: 'datetime'
      },
      yaxis: {
        tooltip: {
          enabled: true
        }
      }
    }

    $.getJSON('data.json', function(json) {
        for (let i = 0; i < json.length; i++) {
            var el = json[i];
            options.series[0].data.push({
                x: new Date(el[0] * 1000),
                y: [el[3], el[2], el[1], el[4]]
            });
            if (isNaN(options.yaxis.min)) {
                options.yaxis.min = el[3];
                options.yaxis.max = el[4];
            }
            options.yaxis.min = Math.min(el[1], el[2], el[3], el[4], options.yaxis.min);
            options.yaxis.max = Math.max(el[1], el[2], el[3], el[4], options.yaxis.max);
        }
        var h = options.yaxis.max - options.yaxis.min;
        options.yaxis.min -= h / 3;
        options.yaxis.max += h / 3;

        var chart = new ApexCharts(
          document.querySelector("#chart"),
          options
        );

        chart.render();
    });
    </script>
            </fieldset>
        </div>
    </div>

    <div class="blue window half-width">
        <h3>Notifications</h3>
        <p>Fees change: blah</p>
    </div>

  </body>
</html>
